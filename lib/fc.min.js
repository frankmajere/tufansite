(function(){var c=[].slice,a={}.hasOwnProperty,b=[].indexOf||function(f){for(var e=0,d=this.length;e<d;e++){if(e in this&&this[e]===f){return e}}return -1};(function(){var d;d={algo:{},arr:{},func:{},iter:{},obj:{},str:{},num:{},util:{},coll:{},browser:{}};(function(e){if(typeof window!=="undefined"&&window!==null){(function(){var f;f=window.fc;return e.no_conflict=function(){window.fc=f;return d}})()}e.is_num=function(f){return"number"===typeof f};e.is_str=function(f){return"string"===typeof f};e.is_bool=function(f){return"boolean"===typeof f};e.is_func=function(f){return"function"===typeof f};e.is_obj=function(f){return"object"===typeof f};e.is_array=function(f){return"[object Array]"===Object.prototype.toString.apply(f)};e.nvl=function(){var j,i,g,h,f;g=arguments[0],i=2<=arguments.length?c.call(arguments,1):[];if(g!=null){return g}for(h=0,f=i.length;h<f;h++){j=i[h];if(j!=null){return j}}};(function(){var h,f,j,i,g;f=function(){var k,l;k=null;l=function(){if(this instanceof l){if(this.__init__!=null){k=d.nvl(k,arguments);this.__init__.apply(this,k);return k=null}}else{k=arguments;return new l()}};return l};h=(function(){var k;k=function(){};k.prototype={__apply__:function(){var m,l;m=arguments[0],l=2<=arguments.length?c.call(arguments,1):[];return m.apply(this,l)},__method__:function(l){return d.func.proxy(this[l],this)}};return k})();i=(function(){var k;k=function(l){return !(l in h.prototype)};return function(l){var m,o;for(o in l){m=l[o];if(k(o)){this.prototype[o]=m}}return this}})();g=function(){var k,m,n,l;k=1<=arguments.length?c.call(arguments,0):[];for(n=0,l=k.length;n<l;n++){m=k[n];delete this.prototype[m]}return this};j=function(n,m){var l,o,k;for(o=0,k=m.length;o<k;o++){l=m[o];if(d.is_func(l)){l=l.prototype}n.__load__(l)}};return e.klass=function(){var k,l;l=1<=arguments.length?c.call(arguments,0):[];k=f();k.prototype=new h;k.prototype.constructor=k;k.__load__=i;k.__unload__=g;j(k,l);return k}})();(function(){var g,f;g=function(h,n,i){var j,k,m,l;if(!d.is_obj(h)){return h===n}if(!d.is_obj(n)){return false}if(h.constructor!==n.constructor){return false}for(j in h){if(!a.call(h,j)){continue}k=h[j];if(!n.hasOwnProperty(j)){return false}}for(j in n){if(!a.call(n,j)){continue}k=n[j];if(!h.hasOwnProperty(j)){return false}}for(j in h){if(!a.call(h,j)){continue}k=h[j];m=h[j];l=n[j];if(!i(m,l)){return false}}return true};f=function(h,i){return h===i};e.equal=function(h,i){return g(h,i,f)};return e.deep_equal=function(h,i){return g(h,i,d.deep_equal)}})();return(function(){var j,h,f,k,l,g,i;f=function(n){var m;m=function(){};m.prototype=n.constructor.prototype;return new m};k=function(q,r,p){var n,o,m;m=[];for(n in q){if(!a.call(q,n)){continue}o=q[n];m.push(r[n]=p(o))}return m};j=function(m){return m.slice(0)};h=(function(){var m;m=function(n){return n};return function(n){var o;o=f(n);k(n,o,m);return o}})();l=function(m){var q,p,o,n;n=[];for(p=0,o=m.length;p<o;p++){q=m[p];n.push(d.deep_clone(q))}return n};g=function(m){var n;n=f(m);k(m,n,d.deep_clone);return n};i=function(n,m,o){if(!d.is_obj(n)){return n}if(d.is_array(n)){return m(n)}return o(n)};e.clone=function(m){return i(m,j,h)};return e.deep_clone=function(m){return i(m,l,g)}})()})(d);(function(e){return e.compare=function(g,f){if(g<f){return -1}else{if(f<g){return 1}else{return 0}}}})(d.num);(function(e){e.compare=function(g,f){if(g<f){return -1}else{if(f<g){return 1}else{return 0}}};return e.ic_compare=function(g,f){if(g===f){return 0}else{g=g.toLowerCase();f=f.toLowerCase();return e.compare(g,f)}}})(d.str);(function(e){e.extend=function(h,g){var f,i;for(f in g){if(!a.call(g,f)){continue}i=g[f];h[f]=i}return h};e.merge=function(h,g){var f,i;for(f in g){if(!a.call(g,f)){continue}i=g[f];if(!h.hasOwnProperty(f)){h[f]=i}}return h};e.restrict=function(h,g){var f,i;for(f in h){if(!a.call(h,f)){continue}i=h[f];if(!g.hasOwnProperty(f)){delete h[f]}}return h};return e.subtract=function(h,g){var f,i;for(f in h){if(!a.call(h,f)){continue}i=h[f];if(g.hasOwnProperty(f)){delete h[f]}}return h}})(d.obj);(function(e){e.nop=function(){};e.proxy=function(g,f){return function(){return g.apply(f,arguments)}};e.slice_args=function(g,h,f){return Array.prototype.slice.call(g,h,f)};e.not=function(f){return function(){return !f.apply(null,arguments)}};e.value=function(f){return function(){return f}};e.equal_to=function(f){return function(g){return g===f}};e.greater_than=function(f){return function(g){return f<g}};e.less_than=function(f){return function(g){return g<f}};e.equal=function(g,f){return g===f};e.greater=function(g,f){return f<g};return e.less=function(g,f){return g<f}})(d.func);(function(e){e.InvalidIterator=d.klass({valid:d.func.value(false),next:d.func.nop,get:d.func.nop,set:d.func.nop,remove:d.func.nop});e.AbstractInserter=d.klass({valid:d.func.value(true),next:d.func.nop});return e.ReadOnlyIterator=d.klass({__init__:function(f){return this._iter=f},valid:function(){return this._iter.valid()},get:function(){return this._iter.get()},next:function(){return this._iter.next()}})})(d.iter);(function(e){(function(){var h,f,g;f=d.klass({__init__:function(k,i,j){this._val=k;this._end=i;return this._step=j},next:function(){return this._val+=this._step},get:function(){return this._val}});h=d.klass(f,{valid:function(){return this._val<this._end}});g=d.klass(f,{valid:function(){return this._end<this._val}});return e.range=function(l,k,i){var j,n,m;n=0;j=Number.MAX_VALUE;m=1;if(i!=null){n=l;j=k;m=i}else{if(k!=null){n=l;j=k}else{if(l!=null){j=l}}}if(n<j&&0<m){return h(n,j,m)}else{if(j<n&&m<0){return g(n,j,m)}else{return d.iter.InvalidIterator()}}}})();return e.random=function(g,i){var f,h;if(!(i!=null)){i=g?g:1;g=0}h=Math.random();f=h*(i-g)+g;return Math.floor(f)}})(d.util);(function(g){var e,h,f;e=d.klass({__init__:function(i,k,j){if(k==null){k=0}if(j==null){j=i.length}this._arr=i;this._begin=k;return this._end=j},valid:function(){var i;return(this._begin<=(i=this._idx)&&i<this._end)},get:function(){return this._arr[this._idx]},set:function(i){return this._arr[this._idx]=i},remove:function(){return this._arr.splice(this._idx,1)}});f=function(i){if(i==null){i=1}return this._idx+=i};h=function(i){if(i==null){i=1}return this._idx-=i};g.Iterator=d.klass(e,{__init__:function(i,k,j){this.__apply__(e.prototype.__init__,i,k,j);return this._idx=this._begin},next:f,prev:h});g.ReversedIterator=d.klass(e,{__init__:function(i,k,j){this.__apply__(e.prototype.__init__,i,k,j);return this._idx=this._end-1},next:h,prev:f});g.Inserter=d.klass(d.iter.AbstractInserter,{__init__:function(i,j){if(j==null){j=0}this._arr=i;return this._pos=j},set:function(i){this._arr.splice(this._pos,0,i);return this._pos+=1}});g.FrontInserter=d.klass(d.iter.AbstractInserter,{__init__:function(i){return this._arr=i},set:function(i){return this._arr.unshift(i)}});g.BackInserter=d.klass(d.iter.AbstractInserter,{__init__:function(i){return this._arr=i},set:function(i){return this._arr.push(i)}});return g.compare=function(j,i){if(j===i){return 0}return d.str.compare(j.toString(),i.toString())}})(d.arr);(function(e){e.Iterator=d.klass({__init__:function(f){this._obj=f;return this._keys=this._key_iter(f)},valid:function(){return this._keys.valid()},next:function(){return this._keys.next()},get:function(){var f;f=this._keys.get();return{key:f,value:this._obj[f]}},set:function(g){var f;f=this._keys.get();return this._obj[f]=g.value},remove:function(){var f;f=this._keys.get();return delete this._obj[f]},_key_iter:function(h){var f,g;g=(function(){var i;i=[];for(f in h){if(!a.call(h,f)){continue}i.push(f)}return i})();return d.arr.Iterator(g)}});return e.Inserter=d.klass(d.iter.AbstractInserter,{__init__:function(f){return this._obj=f},set:function(f){return this._obj[f.key]=f.value}})})(d.obj);(function(g){var e,h,f;e=d.klass({__init__:function(k,j,i){if(j==null){j=0}if(i==null){i=k.length}this._str=k;this._begin=j;return this._end=i},valid:function(){var i;return(this._begin<=(i=this._idx)&&i<this._end)},get:function(){return this._str.charAt(this._idx)}});f=function(i){if(i==null){i=1}return this._idx+=i};h=function(i){if(i==null){i=1}return this._idx-=i};g.Iterator=d.klass(e,{__init__:function(k,j,i){this.__apply__(e.prototype.__init__,k,j,i);return this._idx=this._begin},next:f,prev:h});return g.ReversedIterator=d.klass(e,{__init__:function(k,j,i){this.__apply__(e.prototype.__init__,k,j,i);return this._idx=this._end-1},next:h,prev:f})})(d.str);(function(f){var k,j,h,i,g,e,l;g=function(m){return(m.valid!=null)&&(m.next!=null)};i=function(m){return g(m)&&(m.get!=null)};e=function(m){return g(m)&&(m.set!=null)};h=function(m){return g(m)&&(m.get!=null)&&(m.set!=null)};j=function(m){if(d.is_str(m)){return d.str.Iterator(m)}else{if(d.is_array(m)){return d.arr.Iterator(m)}else{if(i(m)){return m}else{if(m.iterator!=null){return m.iterator()}else{if(d.is_obj(m)){return d.obj.Iterator(m)}else{return d.iter.InvalidIterator}}}}}};l=function(m){if(d.is_array(m)){return d.arr.Iterator(m)}else{if(e(m)){return m}else{if(m.iterator){return m.iterator()}else{if(d.is_obj(m)){return d.obj.Iterator(m)}else{return d.iter.InvalidIterator}}}}};k=function(m){if(d.is_array(m)){return d.arr.Iterator(m)}else{if(h(m)){return m}else{if(m.iterator){return m.iterator()}else{if(d.is_obj(m)){return d.obj.Iterator(m)}else{return d.iter.InvalidIterator}}}}};f.each=function(o,p){var n,m;n=j(o);m=[];while(n.valid()){p(n.get());m.push(n.next())}return m};f.iterate=function(p,r,o){var q,n,m;if(o==null){o=null}n=j(p);while(n.valid()){q=n.get();m=r(q);if(m!=null){return m}n.next()}return o};f.count=function(n){var o,m;m=j(n);o=0;while(m.valid()){o+=1;m.next()}return o};f.extreme=function(p,o){var n,m;m=j(p);if(!m.valid()){null}n=m.get();m.next();f.each(m,function(q){if(o(q,n)){return n=q}});return n};f.max=function(m){return f.extreme(m,d.func.greater)};f.min=function(m){return f.extreme(m,d.func.less)};f.equal=function(q,p,o){var n,m;if(o==null){o=d.func.equal}n=j(q);m=j(p);while(n.valid()){if(!m.valid()){return false}if(!o(n.get(),m.get())){return false}n.next();m.next()}return true};(function(){var m;m=d.klass({__init__:function(n,o){this._iter=n;return this._op=o},valid:function(){return this._iter.valid()},next:function(){return this._iter.next()},get:function(){return this._op(this._iter.get())}});return f.map=function(o,p){var n;n=j(o);return m(n,p)}})();f.copy=function(p,r){var q,o,n,m;o=j(p);q=l(r);m=[];while(o.valid()&&q.valid()){n=o.get();q.set(n);o.next();m.push(q.next())}return m};(function(){var m;m=d.klass({__init__:function(o,n){this._iter=o;return this._pred=n},valid:function(){var n;while(this._iter.valid()){n=this._iter.get();if(this._pred(n)){return true}this._iter.next()}return false},next:function(){return this._iter.next()},get:function(){return this._iter.get()}});return f.filter=function(p,n){var o;o=j(p);return m(o,n)}})();f.remove=function(n,m){return f.filter(n,d.func.not(m))};f.reduce=function(n,o,p){var m;m=o;f.each(n,function(q){return m=p(m,q)});return m};f.search=function(o,m){var n;if(!d.is_func(m)){m=d.func.equal_to(m)}n=n=j(o);while(n.valid()){if(m(n.get())){return n}n.next()}return d.iter.InvalidIterator()};(function(){var m;m=d.klass({__init__:function(o,n,p){this._iter=o;this._pred=n;return this._repl=p},valid:function(){return this._iter.valid()},next:function(){return this._iter.next()},get:function(){var n;n=this._iter.get();if(this._pred(n)){return this._repl(n)}else{return n}}});return f.replace=function(q,o,n){var p;if(!d.is_func(o)){o=d.func.equal_to(o)}if(!d.is_func(n)){n=d.func.value(n)}p=j(q);return m(p,o,n)}})();f.fill=function(o,q){var p,n,m;if(!d.is_func(q)){q=d.func.value(q)}n=l(o);m=[];while(n.valid()){p=q();n.set(p);m.push(n.next())}return m};f.fill_n=function(p,t,s){var q,n,o,m;if(!d.is_func(s)){s=d.func.value(s)}n=l(p);o=d.util.range(t);m=[];while(n.valid()&&o.valid()){q=s();n.set(q);n.next();m.push(o.next())}return m};f.all=function(o,m){var p,n;if(!d.is_func(m)){m=d.func.equal_to(m)}n=j(o);while(n.valid()){p=n.get();if(!m(p)){return false}n.next()}return true};f.any=function(n,m){return f.search(n,m).valid()};f.none=function(n,m){return !f.any(n,m)};f.join=function(n,o){var m,q,p;if(o==null){o=""}p=j(n);q=(function(){var r;r=[];while(p.valid()){m=String(p.get());p.next();r.push(m)}return r})();return q.join(o)};return(function(){var m;m=d.klass({__init__:function(o,n){this._iter=o;return this._cnt=d.util.range(n)},valid:function(){return this._iter.valid()&&this._cnt.valid()},next:function(){this._iter.next();return this._cnt.next()},get:function(){return this._iter.get()}});return f.top_n=function(p,n){var o;o=j(p);return m(o,n)}})()})(d.algo);(function(e){e.to_array=function(g){var f;f=[];d.algo.copy(g,e.BackInserter(f));return f};e.make_array=function(g,h){var f;f=[];d.algo.fill_n(e.BackInserter(f),g,h);return f};e.last=function(f){return f[f.length-1]};e.erase=function(f,h,g){if(h==null){h=0}if(g==null){g=f.length}return f.splice(h,g-h)};e.has=function(f,g){return -1!==f.indexOf(g)};e.chunk=function(f,j){var h,l,k,g;g=[];for(h=l=0,k=f.length;0<=k?l<k:l>k;h=l+=j){g.push(f.slice(h,h+j))}return g};return(function(){var g,f;f=function(h){var i;i=d.util.random(h.length);return h[i]};g=function(h,n){var l,m,k,o,j;k=h.slice();m=function(){var i,p,q;i=d.util.random(k.length);p=k[i];[].splice.apply(k,[i,i-i+1].concat(q=[])),q;return p};j=[];for(l=o=0;0<=n?o<n:o>n;l=0<=n?++o:--o){j.push(m())}return j};return e.random=function(h,i){if(i==null){i=h.length}if(h.length<i){i=h.length}if(i===1){return f(h)}else{return g(h,i)}}})()})(d.arr);(function(e){e.make_str=function(j,g){var h,f;h=d.is_func(g)?g:function(){return g};return((function(){var k,i;i=[];for(f=k=0;0<=j?k<j:k>j;f=0<=j?++k:--k){i.push(h(f))}return i})()).join("")};e.ljust=function(g,f,i){var h;if(i==null){i=""}h=f-g.length;if(0<h){return e.make_str(h,i)+g}else{return g}};e.rjust=function(g,f,i){var h;if(i==null){i=""}h=f-g.length;if(0<h){return g+e.make_str(h,i)}else{return g}};e.ltrim=function(f){return f.replace(/^\s+/,"")};e.rtrim=function(f){return f.replace(/\s+$/,"")};e.trim=function(f){return f.replace(/(?:^\s+)|(?:\s+$)/g,"")};(function(){var f;f=function(h,i,j){var g;if(j==null){j=true}g=j?"":"i";return RegExp(i,g).test(h)};e.begin_with=function(h,g,i){return f(h,"^"+g,i)};e.end_with=function(h,g,i){return f(h,g+"$",i)};return e.like=function(h,g,i){return f(h,g,i)}})();(function(){var f,g;f=function(h){if(b.call("|.+?*()[]^${}\\",h)>=0){return"\\"+h}else{return h}};g=function(h){var i;return((function(){var l,k,j;j=[];for(l=0,k=h.length;l<k;l++){i=h[l];j.push(f(i))}return j})()).join()};return e.replace_all=function(i,h,j){h=g(h);return i.replace(RegExp(h,"g"),j)}})();(function(){var g,h,f;g=d.klass({__init__:function(i){this._s="";this._ph="";this._reps=i;return this.parse=this._normal_state_parse},get:function(){return this._s},_normal_state_parse:function(i){if("{"!==i){return this._s+=i}else{return this.parse=this._read_placeholder_state_parse}}});f=d.klass(g,{__init__:function(i){this.__apply__(g.prototype.__init__,i);return this._c=d.util.range()},_read_placeholder_state_parse:function(i){switch(i){case"{":this._s+="{";return this.parse=this._normal_state_parse;case"}":if(""===this._ph){this._s+=this._reps[this._c.get()];this._c.next()}else{this._s+=this._reps[Number(this._ph)];this._ph=""}return this.parse=this._normal_state_parse;default:return this._ph+=i}}});h=d.klass(g,{__init__:function(i){return this.__apply__(g.prototype.__init__,i)},_read_placeholder_state_parse:function(i){switch(i){case"{":this._s+="{";return this.parse=this._normal_state_parse;case"}":this._s+=this._reps[this._ph];this._ph="";return this.parse=this._normal_state_parse;default:return this._ph+=i}}});return e.format=function(){var n,k,i,l,m,j;l=arguments[0],i=2<=arguments.length?c.call(arguments,1):[];if(i.length===1&&d.is_obj(i[0])){k=h(i[0])}else{k=f(i)}for(m=0,j=l.length;m<j;m++){n=l[m];k.parse(n)}return k.get()}})();return e.title=function(f){return f[0].toUpperCase()+f.slice(1)}})(d.str);(function(e){var f;f=function(h,g){if(h===g){return 0}else{return 1}};(function(){var j,m,h,k,g,i,l;l=function(n){return this._elems.unshift(n)};g=function(){return this._elems.shift()};h=function(){return this._elems[0]};i=function(n){return this._elems.push(n)};k=function(){return this._elems.pop()};m=function(){return d.arr.last(this._elems)};j=d.klass({__init__:function(n){if(n!=null){return this._elems=d.arr.to_array(n)}else{return this._elems=[]}},size:function(){return this._elems.length},empty:function(){return 0===this.size()},erase:function(o,n){if(o==null){o=0}if(n==null){n=this.size()}return this._elems.splice(o,n-o)},iterator:function(){var n;n=d.arr.Iterator(this._elems);return d.iter.ReadOnlyIterator(n)},reversed_iterator:function(){var n;n=d.arr.ReversedIterator(this._elems);return d.iter.ReadOnlyIterator(n)}});e.Stack=d.klass(j,{push:i,pop:k,peek:m});e.Queue=d.klass(j,{push:i,pop:g,peek:h});return e.Deque=d.klass(j,{push_front:l,pop_front:g,peek_front:h,push_back:i,pop_back:k,peek_back:m})})();(function(){var i,g,h;h=d.klass({valid:function(){return this.val!=null},init:function(j){this.val=j;this.left=h();return this.right=h()},copy:function(j){this.val=j.val;this.left=j.left;this.right=j.right;return this},destory:function(){delete this.val;delete this.left;delete this.right;return this}});g=d.klass({__init__:function(j){this._set=j;this._crumbs=e.Stack();if(j._root.valid()){return this._crumbs.push(j._root)}},valid:function(){return !this._crumbs.empty()},next:function(){if(this.valid()){return this._traverse(this._crumbs.peek().left)}},_traverse:function(j){if(j.valid()){return this._crumbs.push(j)}else{if(this.valid()){return this._traverse(this._crumbs.pop().right)}}},get:function(){return this._crumbs.peek().val},remove:function(){return this._set._delete_node(this._crumbs.peek())}});i=d.klass(d.iter.AbstractInserter,{__init__:function(j){return this._set=j},set:function(j){return this._set.add(j)}});return e.Set=d.klass({__init__:function(j,k){this._size=0;this._root=h();this._decide_cmp(j);if(k){return d.algo.copy(k,this.inserter())}},size:function(){return this._size},empty:function(){return 0===this.size()},clear:function(){this._size=0;return this._root=h()},has:function(j){return this._traverse(this._root,j,d.func.value(false),d.func.value(true))},add:function(j){return this._traverse(this._root,j,this._add_item,d.func.value(false))},get:function(j,k){j=this._traverse(this._root,j,d.func.value(null),this._get_item);if(j!=null){return j}else{return k}},remove:function(j){return this._traverse(this._root,j,d.func.value(null),this._delete_node)},iterator:function(){return g(this)},inserter:function(){return i(this)},_traverse:function(m,l,n,k){var j;if(m.valid()){j=this._cmp(m.val,l);if(0<j){return this._traverse(m.left,l,n,k)}else{if(j<0){return this._traverse(m.right,l,n,k)}else{return k.call(this,m,l)}}}else{return n.call(this,m,l)}},_decide_cmp:(function(){var j;j={number:d.num.compare,string:d.str.compare,array:d.arr.compare};return function(k){if(d.is_func(k)){return this._cmp=k}else{if(j[k]!=null){return this._cmp=j[k]}else{return this._cmp=f}}}})(),_add_item:function(k,j){k.init(j);this._size+=1;return true},_delete_node:function(j){var l,k,n,m;l=j.left.valid();k=j.right.valid();m=j.val;if(l&&k){n=j.right;while(n.left.valid()){n=n.left}j.val=n.val;n.copy(n.right)}else{if(l){j.copy(j.left)}else{if(k){j.copy(j.right)}else{j.destory()}}}this._size-=1;return m},_get_item:function(j){return j.val}})})();(function(){var g;g=d.klass(d.iter.AbstractInserter,{__init__:function(h){return this._dict=h},set:function(h){return this._dict.set(h.key,h.value)}});return e.Dict=d.klass({__init__:(function(){var h,i;h={number:d.num.compare,string:d.str.compare,array:d.arr.compare};i=function(j){return function(l,k){return j(l.key,k.key)}};return function(j){if(d.is_func(j)){j=i(j)}else{if(h[j]!=null){j=i(h[j])}else{j=i(f)}}return this._items=e.Set(j)}})(),get:function(h,j){var i;i=this._items.get({key:h});if(i){return i.value}else{return d.nvl(j,this._default)}},set:function(i,k){var j,h;if(k==null){return null}j=this._items.get({key:i});if(j!=null){h=j.value;j.value=k;return h}else{this._items.add({key:i,value:k});return null}},unset:function(h){var i;i=this._items.remove({key:h});if(i!=null){return i.value}else{return null}},size:function(){return this._items.size()},empty:function(){return this._items.empty()},clear:function(){this._items.clear();return this},has:function(h){return this._items.has({key:h})},set_default:function(h){this._default=h;return this},iterator:function(){return this._items.iterator()},inserter:function(){return g(this)}})})();return e.Ring=d.klass({__init__:function(g){this._elems=[];this._idx=0;if(g){return d.algo.copy(g,d.arr.BackInserter(this._elems))}},size:function(){return this._elems.length},empty:function(){return 0===this.size()},prev:function(){var g;g=this._elems[this._idx];this._idx-=1;if(this._idx<0){this._idx=this.size()-1}return g},next:function(){var g;g=this._elems[this._idx];this._idx+=1;if(this._idx===this.size()){this._idx=0}return g},iterator:function(){return d.arr.Iterator(this._elems)}})})(d.coll);(function(e){e.Message=d.klass({__init__:function(){return this._callbacks={}},subscribe:function(){var l,j,f,k,i,h,g;f=2<=arguments.length?c.call(arguments,0,k=arguments.length-1):(k=0,[]),l=arguments[k++];g=[];for(i=0,h=f.length;i<h;i++){j=f[i];g.push(this._subscribe(j,l))}return g},_subscribe:function(f,g){if(this._callbacks[f]==null){this._callbacks[f]=d.coll.Set("")}return this._callbacks[f].add(g)},unsubscribe:function(){var l,j,f,k,i,h,g;f=2<=arguments.length?c.call(arguments,0,k=arguments.length-1):(k=0,[]),l=arguments[k++];g=[];for(i=0,h=f.length;i<h;i++){j=f[i];g.push(this._unsubscribe(j,l))}return g},_unsubscribe:function(f,g){if(this._callbacks[f]!=null){return this._callbacks[f].remove(g)}},publish:function(){var f,h,g,i,j;g=arguments[0],i=2<=arguments.length?c.call(arguments,1):[];h=this._callbacks[g];if(h==null){return}j={timestamp:Date.now(),publisher:this};f=[j].concat(i);return d.algo.each(h,function(k){return k.apply(null,f)})}});(function(){var f,g;f=d.klass({__init__:function(i){var h;return this._iters=(function(){var l,k,j;j=[];for(l=0,k=i.length;l<k;l++){h=i[l];j.push(d.arr.Iterator(h))}return j})()},valid:function(){return d.algo.all(this._iters,function(h){return h.valid()})},next:function(){var j,l,i,k,h;k=this._iters;h=[];for(l=0,i=k.length;l<i;l++){j=k[l];h.push(j.next())}return h},get:function(){var j,l,i,k,h;k=this._iters;h=[];for(l=0,i=k.length;l<i;l++){j=k[l];h.push(j.get())}return h}});g=d.klass({__init__:function(k){var i,j,h;this._iters={};h=[];for(i in k){j=k[i];h.push(this._iters[i]=d.arr.Iterator(j))}return h},valid:function(){return d.algo.all(this._iters,function(h){return h.value.valid()})},next:function(){var i,j,k,h;k=this._iters;h=[];for(j in k){i=k[j];h.push(i.next())}return h},get:function(){var j,h,k,i;j={};i=this._iters;for(h in i){k=i[h];j[h]=k.get()}return j}});return e.zip=function(){var i,h;h=1<=arguments.length?c.call(arguments,0):[];i=h!=null?h[0]:void 0;if(d.is_array(i)){return f(h)}else{if(d.is_obj(i)){return g(i)}else{return d.iter.InvalidIterator()}}}})();return e.random_true_false=function(f){return function(){return Math.random()<f}}})(d.util);if(typeof window!=="undefined"&&window!==null){return window.fc=d}else{return module.exports=d}})()}).call(this);